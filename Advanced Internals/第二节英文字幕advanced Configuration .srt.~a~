1
00:00:00,490 --> 00:00:03,270
你好  我是Jon Galloway  我是Jeff Fritz
Hi I'm Jon Galloway and I'm Jeff Fritz.

2
00:00:03,330 --> 00:00:06,390
所以我们正在挖掘ASP.NET的核心
So we're digging into ASP.NET Core

3
00:00:06,450 --> 00:00:09,733
你将要展示
美国ASP.NET核心配置
and you're going to be showing
us ASP.NET Core configuration.

4
00:00:09,810 --> 00:00:10,920
是的  什么是
Yeah, what are the

5
00:00:10,980 --> 00:00:12,929
我可以配置不同的方式
different ways that I can configure my

6
00:00:12,980 --> 00:00:14,910
申请  有这么多  我想要
application, there's so much that I want

7
00:00:14,970 --> 00:00:16,800
能够控制它如何
to be able to control about how it

8
00:00:16,860 --> 00:00:19,020
开始  如何运行  我想能够
starts, how it runs and I want to be able

9
00:00:19,080 --> 00:00:21,060
访问这些配置设置
to access those configuration settings

10
00:00:21,120 --> 00:00:23,000
来自不同的地方
在我的申请中
from different places
in my application.

11
00:00:23,060 --> 00:00:26,466
我有什么选择  
我该怎么办呢  好的
What are my options there?
What can I do with it? all right.

12
00:00:26,590 --> 00:00:27,530
让我们来看一看
So let's take a look

13
00:00:27,590 --> 00:00:30,750
在我的机器上  我有一对
here on on my machine, I've got a couple

14
00:00:30,810 --> 00:00:33,420
我已经配置的东西
of things already configured I've

15
00:00:33,480 --> 00:00:35,899
从一个示例应用程序开始
started with a sample application that

16
00:00:35,950 --> 00:00:42,066
这是一个ASP.NET应用程序
使用剃刀页
it was a ASP.NET application
using razor pages

17
00:00:42,190 --> 00:00:44,730
我有两样东西
and I've got a couple of things

18
00:00:44,790 --> 00:00:46,649
写在这里  我想告诉你
written out here that I want to show you,

19
00:00:46,700 --> 00:00:49,739
首先  如果我真想抓住
first-off is if I want to actually grab

20
00:00:49,790 --> 00:00:51,570
我的配置很强大
MyConfiguration and have that strongly

21
00:00:51,630 --> 00:00:54,620
类型化配置类  我可以写一个
typed configuration class, I can write a

22
00:00:54,680 --> 00:00:58,280
A班普通班这是一个普通的老班
class a normal class it's a plain old

23
00:00:58,340 --> 00:01:01,590
CLR类在这里  我将提供两个
CLR class here and I'm going to provide two

24
00:01:01,650 --> 00:01:04,088
这里面的属性
配置类
properties inside of this
configuration class.

25
00:01:04,210 --> 00:01:05,900
我要指定我的菜单栏
I'm going to specify my menu bar

26
00:01:05,960 --> 00:01:08,700
背景颜色  然后喜欢文本
background color and then like the text

27
00:01:08,760 --> 00:01:10,619
我想为菜单栏设置的颜色
color that I want to set for my menu bar

28
00:01:10,670 --> 00:01:13,890
在我的申请中  好了  这个班
in my application. Okay, so this class

29
00:01:13,950 --> 00:01:16,560
这很简单  它使用默认
it's pretty simple it's using default

30
00:01:16,620 --> 00:01:19,290
属性值  以便可以设置i
property values so that I can set that I

31
00:01:19,350 --> 00:01:21,210
想要一个白色背景的黑色背景
want a black background with white text

32
00:01:21,270 --> 00:01:24,390
在我的创业班里面
and inside of my startup class I can

33
00:01:24,450 --> 00:01:26,970
配置基于
configure that, based on the

34
00:01:27,030 --> 00:01:29,340
我的配置是可用的
configuration that's available in my

35
00:01:29,400 --> 00:01:33,222
应用此
服务配置方法
application by using this
services.configure method

36
00:01:33,370 --> 00:01:37,170
在我的配置服务方法内部  
我要配置一个
inside of my configure services method.
I'm going to configure a

37
00:01:37,230 --> 00:01:40,680
配置类
使用截面
MyConfiguration class
using the section

38
00:01:40,740 --> 00:01:43,170
从我的配置
这是我的标记
from MyConfiguration
that's labeled from My-

39
00:01:43,230 --> 00:01:45,170
配置集合调用
configuration collection called

40
00:01:46,230 --> 00:01:50,640
我的配置  所以现在在里面
MyConfiguration. So right now inside of

41
00:01:50,700 --> 00:01:53,369
我没有我的
my appsettings.JSON I don't have a my

42
00:01:53,420 --> 00:01:56,939
配置节  所以当我运行这个
configuration section, so when I run this

43
00:01:56,990 --> 00:02:00,420
立即申请
有了这些设置
application right now
with these settings,

44
00:02:00,480 --> 00:02:08,789
让我只是dotnet运行  我会
let me just dotnet run that and I will

45
00:02:08,840 --> 00:02:13,950
复制这个位置并走
转到我的浏览器
copy this location and go
over to my browser,

46
00:02:14,010 --> 00:02:16,230
我会过来看火狐
I will go over to Firefox here and let's

47
00:02:16,290 --> 00:02:20,190
粘贴  你会看到我得到
paste that in and you'll see that I get

48
00:02:20,250 --> 00:02:22,560
配置
样本信息
a Configuration
Sample information this

49
00:02:22,620 --> 00:02:24,480
是我写进的东西
is the stuff that I wrote into the

50
00:02:24,540 --> 00:02:26,940
在我的页面中间  我的页眉是黑色的
middle of my page, my header is black

51
00:02:27,000 --> 00:02:29,160
我有一些信息被抛弃了
I've got some information being dumped

52
00:02:29,220 --> 00:02:31,920
在页脚上  现在让我们看一看
out on the footer. Now let's take a look

53
00:02:31,980 --> 00:02:33,630
我如何得到我的配置
at how I'm getting MyConfiguration

54
00:02:33,690 --> 00:02:36,120
信息进入这个页面  让我走吧
information into this page, let me go

55
00:02:36,180 --> 00:02:39,090
回到我的代码  我会去
back to my code I'll go over to the

56
00:02:39,150 --> 00:02:43,190
页面和我想向您展示布局
pages and I want to show you the layout.

57
00:02:43,250 --> 00:02:47,220
现在我正在注入的布局
Now the layout I'm injecting the

58
00:02:47,280 --> 00:02:49,680
配置对象  我也要去
configuration object and I'm also going

59
00:02:49,740 --> 00:02:52,739
注入MyDebug选项
to inject MyConfiguration options,

60
00:02:52,790 --> 00:02:54,959
让我的配置
实际上是课堂
so that MyConfiguration
class is actually

61
00:02:55,010 --> 00:02:58,590
被I期权对象包装
being wrapped by an IOptions object

62
00:02:58,650 --> 00:03:01,410
我可以回到我的身边
配置类
and I can get back my
configuration class

63
00:03:01,470 --> 00:03:03,569
到处都是
fully populated with whatever

64
00:03:03,620 --> 00:03:05,888
它读取的配置和信息
configuration and information it read,

65
00:03:06,080 --> 00:03:09,822
通过访问MyStudioPops.Valk
by accessing MyConfigOptions.value

66
00:03:09,940 --> 00:03:12,900
然后让这个演示有点
And then to make this demo a little bit

67
00:03:12,960 --> 00:03:14,489
有趣  这样你就可以看到
interesting so that you can see how

68
00:03:14,540 --> 00:03:17,099
我们使用代码内部的配置
we're using configuration inside of code

69
00:03:17,150 --> 00:03:19,769
我只是在回应菜单的背景
I'm just echoing the menu background

70
00:03:19,820 --> 00:03:22,889
颜色为我的导航栏颜色和我
color for my nav bar color and I'm

71
00:03:22,940 --> 00:03:25,139
与文本颜色相呼应  使两者兼而有之
echoing the text color and making both

72
00:03:25,190 --> 00:03:28,260
在我的CSS中重要的项目
of those items important in my CSS here

73
00:03:28,320 --> 00:03:30,989
在我的布局之内  现在这可能是
inside of my layout. Now this could be a

74
00:03:31,040 --> 00:03:33,000
连接字符串
您的应用程序
connection string for
your application,

75
00:03:33,060 --> 00:03:36,780
这可以是客户端ID访问
this could be client ID access

76
00:03:36,840 --> 00:03:38,579
访问第三方的信息
information to access a third-party

77
00:03:38,630 --> 00:03:40,530
供应商  也许它是一个像
provider, maybe it's something like a

78
00:03:40,590 --> 00:03:43,350
StEdGrand或Twitter  这些东西可以
SendGrid or Twitter, those things can be

79
00:03:43,410 --> 00:03:44,819
配置在您的配置
configured in your configuration

80
00:03:44,870 --> 00:03:47,519
并在代码中的其他地方使用
and used elsewhere in your code by

81
00:03:47,570 --> 00:03:50,933
把它们放进一个
像这样的强类型类
putting them into a
strongly typed class like this.

82
00:03:51,030 --> 00:03:52,620
我最不想做的事
The last thing that I want to

83
00:03:52,680 --> 00:03:54,569
显示环境变量
show is the environment variables are

84
00:03:54,620 --> 00:03:57,079
从我的应用程序中加载
being loaded up from my application

85
00:03:57,130 --> 00:04:01,590
默认情况下  像Windows
and by default, things like the windows

86
00:04:01,650 --> 00:04:03,599
计算机名称环境变量
computer name environment variable is

87
00:04:03,650 --> 00:04:06,510
被添加到我的配置和I
being added to MyConfiguration and I

88
00:04:06,570 --> 00:04:08,430
可以在页脚看到
can see that here in the footer

89
00:04:08,490 --> 00:04:11,400
杰夫斯瑜伽是我的机器的名字
Jeffs-yoga that's the name of my machine,

90
00:04:11,520 --> 00:04:13,820
我正在使用这个
I'm accessing that by using this

91
00:04:13,880 --> 00:04:16,590
索引器抓取
配置件
indexer to grab that
configuration piece

92
00:04:16,650 --> 00:04:18,933
信息与写作
到页面
of information and write it
out to the page.

93
00:04:19,140 --> 00:04:21,980
但是现在让我们开始改变
But now let's let's start changing

94
00:04:22,040 --> 00:04:24,270
事情有点  我们知道我们
things up a little bit, we know that we

95
00:04:24,330 --> 00:04:27,360
从应用程序设置读取
让我们写一个章节
read from app settings,
so let's write a section into

96
00:04:27,420 --> 00:04:33,330
应用程序设置用于此配置
app settings for MyConfiguration this

97
00:04:33,390 --> 00:04:37,259
是JSON  所以我将在这里添加一个JSON组
is JSON, so I will add a JSON group here

98
00:04:37,310 --> 00:04:40,949
我们将拥有MuuBubgGrand
and we will have MenubarBgcolor

99
00:04:41,000 --> 00:04:43,979
我们将指定  让我开始我想
and we will specify, let's start I want to

100
00:04:44,030 --> 00:04:47,099
让背景变成绿色然后我
make the background green and then my

101
00:04:47,150 --> 00:04:53,044
文字颜色  
让我们把它变成黑色
MenubarColor the text color,
let's make it black.

102
00:04:53,190 --> 00:04:58,379
好吧  确保我把那个
逗号在那里  所以现在我已经正常了
Alright, make sure I put that
comma in there. So now I have properly

103
00:04:58,430 --> 00:05:01,379
格式化的应用程序设置  
我来这里
formatted app settings,
I'll go over here

104
00:05:01,430 --> 00:05:04,409
我会重新启动我的应用程序
and I will restart my application so

105
00:05:04,460 --> 00:05:06,629
我们加载了新的配置
that we load up that new configuration

106
00:05:06,680 --> 00:05:13,319
我会刷新我的页面  当然
and I'll refresh my page and of course

107
00:05:13,370 --> 00:05:16,050
我的头用黑色文本变成绿色
my header turns green with black text

108
00:05:16,110 --> 00:05:17,789
因为现在我正在阅读设置
because now I'm reading settings from

109
00:05:17,840 --> 00:05:21,000
但是我们实际上有
appsettings.JSON .But we actually have

110
00:05:21,060 --> 00:05:23,969
默认配置在我们的内部
configuration by default inside of our

111
00:05:24,020 --> 00:05:26,219
ASP.NET核心应用
这将阅读
ASP.NET Core application
that will read-in

112
00:05:26,270 --> 00:05:29,250
AppEngult.EngNuth.JSON
appsettings.environmentname.JSON

113
00:05:29,310 --> 00:05:31,949
我们可以超越一切
and we can override whatever's

114
00:05:32,000 --> 00:05:34,469
在AppSt设置里面  这是下一个
inside of appsettings, this is the next

115
00:05:34,520 --> 00:05:36,377
在配置层次结构中进行步骤
step in our configuration hierarchy.

116
00:05:36,430 --> 00:05:38,310
所以这很有用  因为我可以说
So that's really useful because I can say

117
00:05:38,370 --> 00:05:40,199
这是我的主要应用程序设置
like this is my main app settings that

118
00:05:40,250 --> 00:05:42,089
我将部署到我的服务器
I'm going to be deploying to my server

119
00:05:42,140 --> 00:05:43,650
但是当我在发展的时候  我想
but when I'm in development I want to

120
00:05:43,710 --> 00:05:45,990
重写某些设置并不是全部
override some of those settings not all

121
00:05:46,050 --> 00:05:47,430
但也许只有少数人
of them but maybe just a few of them.

122
00:05:47,490 --> 00:05:50,219
也许只有几个  所以我打算复制
Maybe just a few, so I'm going to copy out

123
00:05:50,270 --> 00:05:52,710
这个MyDebug部分结束了
this MyConfiguration section go over

124
00:05:52,770 --> 00:05:55,020
进入我的网站
into my appsettings.Development.json

125
00:05:55,080 --> 00:05:58,650
这是我们的默认文件
file this is the default file that we

126
00:05:58,710 --> 00:05:59,909
当你建造时为你提供
provide for you when you're building

127
00:05:59,960 --> 00:06:02,849
在VisualStudio里面  我要去
inside of Visual Studio and I'm going to

128
00:06:02,900 --> 00:06:06,666
更改菜单
紫色背景色
change my menu
background color to purple

129
00:06:06,790 --> 00:06:09,410
让我们变成这样的灰色
and let's make this light gray so

130
00:06:09,470 --> 00:06:17,810
我们仍然可以阅读  
让我重新启动我的应用程序
that we can still read,
let me restart my application.

131
00:06:17,870 --> 00:06:20,810
现在我会浏览我的应用程序
And I'll browse to my application now,

132
00:06:20,870 --> 00:06:24,377
现在我得到紫色的背景
and now I get the purple background,

133
00:06:24,540 --> 00:06:27,500
所以绿色的配置
so the configuration for the green with

134
00:06:27,560 --> 00:06:30,860
黑色文本仍然存在  但这一个
black text is still there but this one

135
00:06:30,920 --> 00:06:33,620
加载第二个  所以这一个将
is loaded second, so this one will

136
00:06:33,680 --> 00:06:38,000
覆盖其他配置  现在我
overlay that other configuration. Now I

137
00:06:38,060 --> 00:06:40,730
提到的东西
推特密码
mentioned things like
Twitter passwords

138
00:06:40,790 --> 00:06:42,320
或者可能是连接字符串
or connection strings that might be

139
00:06:42,380 --> 00:06:44,480
重要的是我们知道  我们谈了
important to you we know and we talked a

140
00:06:44,540 --> 00:06:47,177
关于摆放
那些成为用户隐私的人
little bit about putting
those into user secrets,

141
00:06:47,300 --> 00:06:49,730
用户秘密是一种配置
user secrets are a configuration

142
00:06:49,790 --> 00:06:52,370
下一个加载的选项
option that's loaded next and it should

143
00:06:52,430 --> 00:06:55,400
生活在一个文件中
在我们项目之外
live in a file that's
outside of our project.

144
00:06:55,570 --> 00:06:56,750
所以我要右键点击
So I'm going to right click on

145
00:06:56,810 --> 00:06:58,820
我在VisualStudio中的项目
my project here in Visual Studio and I'm

146
00:06:58,880 --> 00:07:01,580
将选择管理用户机密和我
going to choose Manage User Secrets and I

147
00:07:01,640 --> 00:07:04,800
得到一个空的JSON
文件称为
get an empty .json
file called secrets.json

148
00:07:05,030 --> 00:07:07,400
我要粘贴在我的
I'm going to paste in my

149
00:07:07,460 --> 00:07:09,680
这里的配置让我们改变
configuration here let's change this up

150
00:07:09,740 --> 00:07:11,600
有点  这是我的安全
a little bit, this is my secure

151
00:07:11,660 --> 00:07:13,280
信息  所以我将使
information so I will make the

152
00:07:13,340 --> 00:07:16,688
背景颜色红色和
菜单栏颜色为白色
background color red and the
menu bar color white.

153
00:07:16,830 --> 00:07:17,960
我还有我的另一半
I still have my other

154
00:07:18,020 --> 00:07:20,210
配置设置  但
configuration settings out there but

155
00:07:20,270 --> 00:07:23,210
我已经添加了用户的秘密  这些将是
I've added user secrets, these will be

156
00:07:23,270 --> 00:07:25,580
如果存在用户机密  则加载
loaded if there are user secrets present

157
00:07:25,640 --> 00:07:28,880
我们处于发展模式  所以现在
and we're in development mode. So now

158
00:07:28,940 --> 00:07:31,130
我会回到我的页面  我会刷新
I'll go back to my page and I'll refresh

159
00:07:31,190 --> 00:07:35,270
现在我得到红色的白色文本
and now I get the red with white text,

160
00:07:35,330 --> 00:07:36,890
所以我有三个
不同配置
so I've got three
different configurations

161
00:07:36,950 --> 00:07:39,020
进来  这就是秩序
coming in and this is the order in which

162
00:07:39,080 --> 00:07:42,250
他们互相压倒对方
they're overriding each other

163
00:07:42,310 --> 00:07:45,380
改变我的配置  
好的  所以
and changing MyConfiguration.
Okay, so the

164
00:07:45,440 --> 00:07:46,610
差异只是为了确保我得到它
difference just to make sure I got it

165
00:07:46,670 --> 00:07:51,740
之间的区别
AppStest.Debug开发
the difference between the
appsettings.Development

166
00:07:51,800 --> 00:07:54,590
和秘密  
附件开发
and secrets,
appsettingsDevelopment is

167
00:07:54,650 --> 00:07:56,720
包含在我可能的代码中
included in the code that I may be

168
00:07:56,780 --> 00:07:58,400
检查源代码类型
checking into source control that kind

169
00:07:58,460 --> 00:08:00,500
对的  是的  用户隐私
of thing right, yes. And user secrets

170
00:08:00,560 --> 00:08:02,810
那是别的地方  这是保存的
that's somewhere else. That's kept

171
00:08:02,870 --> 00:08:04,880
在磁盘上的其他地方  你不应该
somewhere else on disk, you shouldn't be

172
00:08:04,940 --> 00:08:06,970
将其检查为源代码管理  您
checking it into source control, you

173
00:08:07,030 --> 00:08:08,450
不希望人们能看到你
don't want folks to be able to see your

174
00:08:08,510 --> 00:08:10,950
密码与事物
源代码管理的内部
passwords and things
inside of source control.

175
00:08:11,060 --> 00:08:13,070
可以  但在这种情况下
Okay. But in this case just to

176
00:08:13,130 --> 00:08:14,470
说明这是不同的
illustrate that this is in a different

177
00:08:14,530 --> 00:08:16,460
我只是改变了颜色
place I'm just changing the color of the

178
00:08:16,520 --> 00:08:19,310
导航栏  好极了  
所以下一件事
navigation bar. Great ok.
So the next thing we

179
00:08:19,370 --> 00:08:20,390
已经看到它正在装载
already saw that it's loading the

180
00:08:20,450 --> 00:08:22,280
像我的计算机一样的环境变量
environment variables like my computer

181
00:08:22,340 --> 00:08:25,340
在页脚中命名  我可以访问
name there in the footer. I can access

182
00:08:25,400 --> 00:08:27,590
并将环境变量发送到
and send in environment variables to

183
00:08:27,650 --> 00:08:31,720
重写那些不同的设置  所以
overwrite those different settings, so

184
00:08:31,780 --> 00:08:33,970
检查我可能在我的
check this out I might have in my

185
00:08:34,030 --> 00:08:38,120
环境将设置的东西
environment something that will setup

186
00:08:38,180 --> 00:08:40,070
环境变量
environment variables like

187
00:08:40,130 --> 00:08:42,800
MyBuffic
MyConfiguration_MenubarBgColor is

188
00:08:42,860 --> 00:08:45,880
黄色  MenubarColor
yellow, MenubarColor is

189
00:08:45,940 --> 00:08:48,620
黑色和这些
环境设置是
black and these
environment settings are

190
00:08:48,680 --> 00:08:51,070
我们的操作人员可以设置的东西
things that our operations folks can set

191
00:08:51,130 --> 00:08:53,540
在服务器上有一些
up on the server either by having some

192
00:08:53,600 --> 00:08:55,390
类似这样或那样的脚本文件
sort of a script file like this or maybe

193
00:08:55,450 --> 00:08:56,950
他们把它放在窗户里
they set it up right in their windows

194
00:08:57,010 --> 00:09:00,050
配置或在不同的服务中
configuration or in different service

195
00:09:00,110 --> 00:09:02,310
Linux中的配置
configurations in Linux as the

196
00:09:02,370 --> 00:09:05,480
WebService正在启动  
所以我要走了
webservice is starting up.
So I'm going to go

197
00:09:05,540 --> 00:09:09,230
回到我的控制台窗口
back to my console window here

198
00:09:09,290 --> 00:09:12,170
我要去跑步
设置环境
and I'm going to run
this set environment

199
00:09:12,230 --> 00:09:14,950
命令  它有一个额外的夫妇
command and it's got a couple extra

200
00:09:15,010 --> 00:09:16,630
那里的空间让它不快乐
spaces in there that it's not happy

201
00:09:16,690 --> 00:09:19,990
关于  让我只需复制这些设置
about, let me just copy these settings in

202
00:09:20,050 --> 00:09:23,470
我们走了  现在注意
there we go. Now notice that

203
00:09:23,530 --> 00:09:27,880
配置设置
是分层的  所以
configuration setting
is hierarchical, so

204
00:09:27,940 --> 00:09:30,820
我们如何定义该层次结构
how do we define that hierarchy that

205
00:09:30,880 --> 00:09:33,620
我们正在设置我的配置
we're setting my configuration and then

206
00:09:33,680 --> 00:09:36,580
这些项目里面  你分开
these items inside of it, you separate

207
00:09:36,640 --> 00:09:38,810
使用双下划线
them by using a double underscore

208
00:09:38,870 --> 00:09:42,690
在每一个片段之间
between each one of the pieces of that

209
00:09:42,750 --> 00:09:45,050
要配置的配置键
configuration key we want to configure.

210
00:09:45,110 --> 00:09:49,010
所以我将再次运行dotnet  这次
So I will dotnet run again and this time

211
00:09:49,070 --> 00:09:50,930
使用这些环境变量
with those environment variables in

212
00:09:50,990 --> 00:09:54,680
我应该看到黄色的航行
place I should see a yellow navigation

213
00:09:54,740 --> 00:09:57,410
酒吧黑文字  因为它来了
bar with black text, because it's coming

214
00:09:57,470 --> 00:09:59,360
从我的环境变量设置
from my environment variable settings.

215
00:09:59,420 --> 00:10:01,760
现在这真的很强大
Now this is also really powerful on

216
00:10:01,820 --> 00:10:04,250
天蓝应用服务  因为我们有
Azure app service because we have that

217
00:10:04,310 --> 00:10:06,860
在蔚蓝的控制台上你看到所有
console on Azure where you see all the

218
00:10:06,920 --> 00:10:08,200
正在存在的环境变量
environment variables that are being

219
00:10:08,260 --> 00:10:10,370
专门为我配置的
configured specifically for my

220
00:10:10,430 --> 00:10:12,760
应用程序和我可以在此添加
application and I can add-in in this

221
00:10:12,820 --> 00:10:15,620
实例配置
case MyConfiguration_MenubarBgColor

222
00:10:15,680 --> 00:10:18,190
在Azure上设置这些设置
on Azure and set those settings

223
00:10:18,250 --> 00:10:21,170
适当地  现在有一个
appropriately. Now there's one

224
00:10:21,230 --> 00:10:23,240
最后的地方我想告诉你
final place I want to show you that you

225
00:10:23,300 --> 00:10:25,910
可以添加配置
超越事物
can add configuration
to override things.

226
00:10:25,970 --> 00:10:28,570
环境变量是最后一件事
Environment variables is the last thing

227
00:10:28,630 --> 00:10:31,370
在正在配置的堆栈中
in the stack that's being configured

228
00:10:31,430 --> 00:10:36,680
ASP.NET核心内部  IIS有自己的
inside of ASP.NET Core. IIS has their own

229
00:10:36,740 --> 00:10:38,720
它们将配置设置
configuration settings that they will

230
00:10:38,780 --> 00:10:41,600
在Web配置中加载时  我的
load up from within web config when my

231
00:10:41,660 --> 00:10:45,320
应用程序正在运行
IIS内部  所以
application is running
inside of IIS. So the

232
00:10:45,380 --> 00:10:46,910
Windows环境下的Internet信息服务器
Internet Information Server on Windows

233
00:10:46,970 --> 00:10:49,550
使用称为ASP.NET核心的东西
uses something called the ASP.NET Core

234
00:10:49,610 --> 00:10:53,220
模块  它有一个Web配置
看起来像这样
module and it has a web config
that looks like this

235
00:10:53,280 --> 00:10:56,970
当它运行我的应用程序时  我可以放置
when it runs my application. I can place

236
00:10:57,030 --> 00:11:01,290
里面有一个条目
环境变量
inside of here an entry for
environmentVariables

237
00:11:01,350 --> 00:11:03,290
这只是针对这一点
that are specific just to this

238
00:11:03,350 --> 00:11:05,100
我们正在主持的过程
process that we're hosting that's

239
00:11:05,160 --> 00:11:08,310
运行我们的红隼网站服务器
running our Kestrel web server for

240
00:11:08,370 --> 00:11:12,240
ASP.NET核心  所以我会添加一个
环境变量
ASP.NET core. So I will add an
environmentVariable

241
00:11:12,300 --> 00:11:13,430
我也会用同样的方法
and I'm going to use those same

242
00:11:13,490 --> 00:11:19,700
我以前的名字
MyBuffic
names that I had before
MyConfiguration_MenubarBgColor

243
00:11:19,760 --> 00:11:22,290
我会指定它的价值
and I'll specify the value of that

244
00:11:22,350 --> 00:11:24,680
环境变量  让我们
让天空变成蓝色
environmentVariable, let's
make it skyblue,

245
00:11:24,740 --> 00:11:29,410
我会再创造一个
环境变量
I'll create one more
environmentVariable,

246
00:11:29,470 --> 00:11:36,680
这是我的配置
这次我们要做
this is MyConfiguration_MenubarColor
and this time we're going to make

247
00:11:36,740 --> 00:11:43,230
黑色的  好的  现在如果我重新启动
that black, all right. So now if I restart

248
00:11:43,290 --> 00:11:47,290
在我的控制台窗口里面
over here inside of my console window

249
00:11:47,350 --> 00:11:49,640
我会浏览我的
and I'm going to browse back to my

250
00:11:49,700 --> 00:11:54,200
应用程序  这次我仍然得到
application, this time I still get the

251
00:11:54,260 --> 00:11:56,670
黄色和黑色  我得到黄色
yellow and black. I get the yellow

252
00:11:56,730 --> 00:11:58,730
黑色  因为我在里面奔跑
and black because I'm running inside of

253
00:11:58,790 --> 00:12:03,140
红隼不在IIS内部  所以让我走吧
kestrel not inside of IIS. So let me go

254
00:12:03,200 --> 00:12:07,390
再来一次  我要跑这个
back one more time, I'm going to run this

255
00:12:07,450 --> 00:12:11,990
使用IIS Express  所以
读取我的Web.CONFIG
using IIS Express, so it
reads my web.config

256
00:12:12,050 --> 00:12:14,520
并解析这些环境变量
and parses these environmentVariables

257
00:12:14,580 --> 00:12:16,310
对于.NET进程来说
for the .Net process that

258
00:12:16,370 --> 00:12:21,780
它是主机  所以我将推出IIS快车
它会用我的
it's hosting. So I'll launch the IIS Express
instance it's going to use my

259
00:12:21,840 --> 00:12:27,620
我的Web.CONFIG
写下  启动我的浏览器
web.config that I
wrote, starting my browser

260
00:12:27,680 --> 00:12:32,570
现在我的天空是黑色的天蓝色  所以
and now I get the sky-blue with black. So

261
00:12:32,630 --> 00:12:33,760
我已经写了配置
I have written configuration

262
00:12:33,820 --> 00:12:36,310
具体用于Web服务器的使用
specifically for the web server to use.

263
00:12:36,370 --> 00:12:39,740
正在分析和添加
It's being parsed and added in, that

264
00:12:39,800 --> 00:12:41,510
提供了一个配置级别
gives you a level of configuration if

265
00:12:41,570 --> 00:12:44,160
你想做些具体的事情
you want to do something specific to

266
00:12:44,220 --> 00:12:47,300
IIS只是为了这个过程  因为你
IIS only for this process because you

267
00:12:47,360 --> 00:12:49,170
不想分享
那些环境变量
don't want to share
those environment variables

268
00:12:49,280 --> 00:12:50,990
也许还有其他的过程
with other processes perhaps

269
00:12:51,050 --> 00:12:53,540
在共享宿主环境中  对
in a shared hosting environment, right.

270
00:12:53,600 --> 00:12:56,910
但是我们有这些不同的选择
But we have all these different options

271
00:12:56,970 --> 00:12:58,470
我们可以一起工作
we can work with.

272
00:12:58,530 --> 00:13:02,760
可以  因此  我们重新设置配置
Okay. So to recap we set configuration

273
00:13:02,820 --> 00:13:05,310
从半打申请
for our application from half-dozen

274
00:13:05,370 --> 00:13:06,840
不同的地方
different places where there was

275
00:13:06,900 --> 00:13:09,240
AppStutsJSON  AppSt设置与
appsettings.json, appsettings with the

276
00:13:09,300 --> 00:13:11,760
在这种情况下
environmentname.json in this case

277
00:13:11,820 --> 00:13:13,530
发展  但我也可以写
development, but I could also write an

278
00:13:13,590 --> 00:13:15,660
如果我有
appsetting.staging if I have

279
00:13:15,720 --> 00:13:17,460
配置信息
configuration information that's

280
00:13:17,520 --> 00:13:19,710
特定于我的分级环境
specific to my staging environment that

281
00:13:19,770 --> 00:13:21,240
我希望我的测试员能够工作
I want my testers to be able to work

282
00:13:21,300 --> 00:13:23,310
用  我也可以设置应用程序
with. I can also have app settings

283
00:13:23,370 --> 00:13:25,770
我的DevOps
production.json that my DevOps folks

284
00:13:25,830 --> 00:13:27,690
在生产中管理上层
manage in the upper in the production

285
00:13:27,750 --> 00:13:29,370
空间  我可以设置环境
space. I can set environment

286
00:13:29,430 --> 00:13:32,070
变量  我可以使用用户的秘密来隐藏
variables, I can use user secrets to hide

287
00:13:32,130 --> 00:13:34,590
开发机器上的东西
things on just the development machine

288
00:13:34,650 --> 00:13:36,660
这些环境变量可以是
and those environmentVariables can be

289
00:13:36,720 --> 00:13:38,790
为Web服务器专门设置
set specifically for the web server in

290
00:13:38,850 --> 00:13:41,280
Web服务器进程  有很多
the web server process. It's a lot of

291
00:13:41,340 --> 00:13:43,410
灵活性和很多选择  我已经
flexibility and a lot of options, I've

292
00:13:43,470 --> 00:13:46,140
访问我的页面上的配置
accessed my configuration on my page

293
00:13:46,200 --> 00:13:49,560
用索引器和计算机
both with an indexer by saying computer

294
00:13:49,620 --> 00:13:52,110
配置对象内部的名称
name inside of the configuration object

295
00:13:52,170 --> 00:13:54,150
而且通过创造我的
and but also by creating that my

296
00:13:54,210 --> 00:13:57,210
强配置
类型化的类
configuration strongly
typed class that

297
00:13:57,270 --> 00:13:59,310
为这些东西定义属性
had properties defined for those things

298
00:13:59,370 --> 00:14:02,940
里面  很酷的东西  
你知道一些事情
inside of it, pretty cool stuff.
You know some things

299
00:14:03,000 --> 00:14:04,200
你证明我认为是真的
that you showed that I think are really

300
00:14:04,260 --> 00:14:06,150
值得一  我有很多
worthwhile, one is I've got a lot of

301
00:14:06,210 --> 00:14:08,460
灵活性  因为我正在开发我可以
flexibility so as I'm developing I can

302
00:14:08,520 --> 00:14:10,050
说这就是我想工作的方式
say this is how I want to work in

303
00:14:10,110 --> 00:14:11,670
生产  这就是我想要工作的方式
production, this is how I want to work

304
00:14:11,730 --> 00:14:13,950
本地和所有这些  另一件事是
locally and all that. Another thing is it

305
00:14:14,010 --> 00:14:16,320
让安全变得容易多了
makes it a lot easier to be secure

306
00:14:16,380 --> 00:14:19,770
而不是偶然
检查我的  你知道
and not accidentally
checking my, you know

307
00:14:19,830 --> 00:14:21,930
密码和密码
passwords and secrets into source

308
00:14:21,990 --> 00:14:24,540
因为我能控制的东西
control because of things like I can put

309
00:14:24,600 --> 00:14:26,610
当我发展的时候  我可以把那些
locally when I develop, I can put those

310
00:14:26,670 --> 00:14:28,860
在我的用户秘密和生产说
in my user secrets and in production say

311
00:14:28,920 --> 00:14:30,390
在Azure  我可以创建那些
on Azure I can create those as

312
00:14:30,450 --> 00:14:32,010
环境设置  环境
environment settings, environment

313
00:14:32,070 --> 00:14:33,930
变量或我可以创建那些你知道的
variables or I can create those you know

314
00:14:33,990 --> 00:14:35,730
不管我的服务器设置了什么
and whatever my server is set those up

315
00:14:35,790 --> 00:14:37,620
作为环境变量  它是一个很大的变量
as environmentVariables it's a much

316
00:14:37,680 --> 00:14:40,170
更好的是你知道这有助于你
better you know it kind of pushes you

317
00:14:40,230 --> 00:14:41,790
远离那些你不喜欢的东西
away from putting those things you don't

318
00:14:41,850 --> 00:14:43,710
想要意外分享
want to accidentally share makes it

319
00:14:43,770 --> 00:14:45,660
更容易在本地保存它们
easier for you to keep them locally in

320
00:14:45,720 --> 00:14:47,190
你的环境和你的生产
your environment and in your production

321
00:14:47,250 --> 00:14:49,260
环境也是如此  它非常
environments as well. It's very

322
00:14:49,320 --> 00:14:51,630
灵活  非常强大  你可以使用那些
flexible, very powerful you can use those

323
00:14:51,690 --> 00:14:53,130
同样的事情  当你开始使用其他
same things when you start using other

324
00:14:53,190 --> 00:14:55,800
像码头集装箱这样的工具  我们可以
tools like Docker Containers, we can

325
00:14:55,860 --> 00:14:57,540
注入我们的环境变量
inject our environmentVariables that

326
00:14:57,600 --> 00:15:01,530
顺便说一下  很棒的东西  
谢谢加入我们
way as well,Great,  cool stuff.
Thanks for joining us

327
00:15:01,590 --> 00:15:02,790
希望你能再多停留一会儿
hope you'll stick around for some more

328
00:15:02,850 --> 00:15:06,170
ASP.NET核心视频
videos on ASP.NET Core.

